@model RedFolder.ViewModels.BlogCollection

@{
    ViewBag.Title = "Blog";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="row rfc-header home-page">
    <h1>Blog</h1>
</div>

<div class="row">
    <div class="col-xs-12">
        <ul>
            @foreach (var keyWord in Model.KeyWords)
            {
                <li class="skill-label">
                    <a asp-controller="Blog"
                       asp-action="Index"
                       asp-route-pageNo="@Model.PageNo"
                       asp-route-blogsPerPage="@Model.BlogsPerPage"
                       asp-route-orderBy="@Model.OrderedBy"
                       asp-route-filterBy="@keyWord.Key">
                        @keyWord.Key (@keyWord.Value)
                    </a>
                </li>
            }
        </ul>
    </div>
</div>

@if (Model.Pages > 1)
{
    <div class="row pager">
        @if (Model.PageNo == 1)
        {
            <div class="btn btn-default disabled btn-xs">
                First
            </div>

            <div class="btn btn-default disabled btn-xs">
                Previous
            </div>
        }
        else
        {
            <div class="btn btn-default btn-xs">
                <a asp-controller="Blog"
                   asp-action="Index"
                   asp-route-pageNo="1"
                   asp-route-blogsPerPage="@Model.BlogsPerPage"
                   asp-route-orderBy="@Model.OrderedBy"
                   asp-route-filterBy="@Model.FilterBy">
                    First
                </a>
            </div>

            <div class="btn btn-default btn-xs">
                <a asp-controller="Blog"
                   asp-action="Index"
                   asp-route-pageNo="@(Model.PageNo - 1)"
                   asp-route-blogsPerPage="@Model.BlogsPerPage"
                   asp-route-orderBy="@Model.OrderedBy"
                   asp-route-filterBy="@Model.FilterBy">
                    Previous
                </a>
            </div>
        }

        <div class="page-no">
            @Model.PageNo of @Model.Pages
        </div>

        @if (Model.PageNo == Model.Pages)
        {
            <div class="btn btn-default disabled btn-xs">
                Next
            </div>

            <div class="btn btn-default disabled btn-xs">
                Last
            </div>
        }
        else
        {
            <div class="btn btn-default btn-xs">
                <a asp-controller="Blog"
                   asp-action="Index"
                   asp-route-pageNo="@(Model.PageNo + 1)"
                   asp-route-blogsPerPage="@Model.BlogsPerPage"
                   asp-route-orderBy="@Model.OrderedBy"
                   asp-route-filterBy="@Model.FilterBy">
                    Next
                </a>
            </div>

            <div class="btn btn-default btn-xs">
                <a asp-controller="Blog"
                   asp-action="Index"
                   asp-route-pageNo="@Model.Pages"
                   asp-route-blogsPerPage="@Model.BlogsPerPage"
                   asp-route-orderBy="@Model.OrderedBy"
                   asp-route-filterBy="@Model.FilterBy">
                    Last
                </a>
            </div>
        }
    </div>
}

<div class="blog-tiles row">
    @foreach (var blog in Model.BlogsForCurrentPage)
    {
        <div class="blog-tile col-xs-12 col-sm-6 col-md-4 col-lg-3">
            <a href="/blog/@blog.Url">
                <div class="blog-tile-inner">
                    @if (blog.Image != null && blog.Image.Length > 0)
                    {
                        <div class="blog-tile-image">
                            <img class="image-responsive" src="@blog.Image" />
                        </div>
                    }
                    <h2>@blog.Title</h2>
                    <p class="blog-tile-date">
                        Published: @blog.Published.ToString("dd-MMM-yyyy")
                        @if (blog.Modified != null && blog.Modified.ToString("dd-MMM-yyyy") != blog.Published.ToString("dd-MMM-yyyy"))
                        {
                            <small>(Modified: @blog.Modified.ToString("dd-MMM-yyyy"))</small>
                        }
                    </p>
                    <p>
                        @blog.Description
                    </p>
                    @if (blog.KeyWords != null && blog.KeyWords.Count() > 0)
                    {
                        <div class="blog-tile-keywords">
                            <ul>
                                @foreach (var keyWord in blog.KeyWords)
                                {
                                    <li class="skill-label">@keyWord</li>
                                }
                            </ul>
                        </div>
                    }
                </div>
            </a>
        </div>
    }
</div>
