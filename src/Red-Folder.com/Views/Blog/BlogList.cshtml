@model RedFolder.ViewModels.BlogCollection

@{
    ViewBag.Title = "Blog";
    Layout = "~/Views/Shared/_Layout2.cshtml";
}

<div class="row rfc-header home-page">
    <h1>Blog</h1>
</div>

<div class="row">
    <div class="col-xs-12 rfc-panel rfc-block-link rfc-panel-center">
        <div class="rfc-panel-inner">
            <div class="row blog-header">
                <div class="col-md-1 filter-switch">
                    <a onclick="toggle(null, '.filter-chooser')">
                        Filter: @(Model.FilterBy == null || Model.FilterBy.Length == 0 ? "None" : Model.FilterBy)
                    </a>
                </div>
            </div>
            <div class="filter-chooser hidden">
                <ul>
                    @foreach (var keyWord in Model.KeyWords)
                    {
                        <li class="keyword @(Model.FilterBy != null && Model.FilterBy.Contains(keyWord.Key)? "filter-by": "")">
                            <a asp-controller="Blog"
                               asp-action="Index"
                               asp-route-pageNo="@Model.PageNo"
                               asp-route-blogsPerPage="@Model.BlogsPerPage"
                               asp-route-orderBy="@Model.OrderedBy"
                               asp-route-filterBy="@keyWord.Key">
                                @keyWord.Key (@keyWord.Value)
                            </a>
                        </li>
                    }
                </ul>
            </div>
        </div>
    </div>
</div>

@{
    await Html.RenderPartialAsync("_Pager", Model);
}

<div class="blog-tiles row">
    @foreach (var blog in Model.BlogsForCurrentPage)
    {
        <div class="blog-tile col-xs-12 col-sm-6 col-md-4 col-lg-3">
            <a href="/blog/@blog.Url">
                <div class="blog-tile-inner">
                    @if (blog.Image != null && blog.Image.Length > 0)
                    {
                        <div class="blog-tile-image">
                            <img class="image-responsive" src="@blog.Image" />
                        </div>
                    }
                    <h2>@blog.Title</h2>
                    <p class="blog-tile-date">
                        Published: @blog.Published.ToString("dd-MMM-yyyy")
                        @if (blog.Modified != null && blog.Modified.ToString("dd-MMM-yyyy") != blog.Published.ToString("dd-MMM-yyyy"))
                        {
                            <small>(Modified: @blog.Modified.ToString("dd-MMM-yyyy"))</small>
                        }
                    </p>
                    <p>
                        @blog.Description
                    </p>
                    @if (blog.KeyWords != null && blog.KeyWords.Count() > 0)
                    {
                        <div class="blog-tile-keywords">
                            <ul>
                                @foreach (var keyWord in blog.KeyWords)
                                {
                                    <li class="skill-label">@keyWord</li>
                                }
                            </ul>
                        </div>
                    }
                </div>
            </a>
        </div>
    }
</div>

@{
    await Html.RenderPartialAsync("_Pager", Model);
}